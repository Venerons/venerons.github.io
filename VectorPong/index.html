<!DOCTYPE HTML>
<html>
  <head>
    <title>VectorPong</title>
    <meta charset="UTF-8">
    <style>
      html {
        font-family: Fantasy, Arial, Sans-Serif;
      }
      body {
        text-align: center;
        background-color: #EFEEB3;
      }
      .controls {
        position: relative;
        width: 50%;
        left: 25%;
        border: dashed black thin;
      }
    </style>
    <script type="text/javascript">
      // Global variables
      var ballX = 300; // Ball x position.
      var ballY = 150; // Ball y position.
      var ballDX = 4; // Change in ball x position.
      var ballDY = 4; // Change in ball y position.

      var boardX = 598; // Board width.
      var boardY = 298; // Board height.

      var paddle1Y = 75; // Initial paddle location.
      var paddle1H = 150; // Paddle height.
      var paddle1D = boardX - paddle1W; // Paddle depth.
      var paddle1W = 10; // Paddle width.

      var paddle2Y = 75; // Initial paddle location.
      var paddle2H = 150; // Paddle height.
      var paddle2D = boardX - paddle2W; // Paddle depth.
      var paddle2W = 10; // Paddle width.

      var p1points = 0;
      var p2points = 0;

      // This function is called on page load.
      function drawGameSVG() {
        // Play the game until the ball stops.
        gameLoop = setInterval(drawBall, 12); // 12ms = ~84 FPS - 16ms = ~60 FPS
        // Add keyboard listener.
        window.addEventListener('keydown', whatKey, true);
      }

      function drawBall() {
        // Change the ball location.
        ballX += ballDX;
        ballY += ballDY;
        ball.setAttribute("cx", ballX);
        ball.setAttribute("cy", ballY);

        // Bounce on a right edge.
        if (ballX + ballDX > boardX - 15) {
          // If the ball hits the paddle, bounce it.
          if (ballY > paddle2Y && ballY < paddle2Y + paddle2H) 
            ballDX = -ballDX;
          else {
            ballX = 300;
            ballY = 150;
            // Player 1 get a point
            p1points++;
            document.getElementById("p1pts").innerHTML = p1points;
          }
        }

        // Bounce on a left edge.
        if (ballX + ballDX < 15) {
          // If the ball hits the paddle, bounce it.
          if (ballY > paddle1Y && ballY < paddle1Y + paddle1H)
            ballDX = -ballDX;
          else {
            ballX = 300;
            ballY = 150;
            // Player 2 get a point
            p2points++;
            document.getElementById("p2pts").innerHTML = p2points;
          }
        }

        // If ball hits the top, bounce it.
        if (ballY + ballDY < 15) ballDY = -ballDY;
        // If the ball hits the bottom, bounce it.
        if (ballY + ballDY > boardY - 15) ballDY = -ballDY;
      }

      // Get key press.
      function whatKey(evt) {
        switch (evt.keyCode) {
          // Up arrow
          case 38:
            paddle2Y = paddle2Y - 20;
            if (paddle2Y < 0) paddle2Y = 0;
            paddle2.setAttribute("y", paddle2Y);
            break;

          // Down arrow
          case 40:
            paddle2Y = paddle2Y + 20;
            if (paddle2Y > boardY - paddle2H) paddle2Y = boardY - paddle2H;
            paddle2.setAttribute("y", paddle2Y);
            break;

          // W key
          case 87:
            paddle1Y = paddle1Y - 20;
            if (paddle1Y < 0) paddle1Y = 0;
            paddle1.setAttribute("y", paddle1Y);
            break;

          // S key
          case 83:
            paddle1Y = paddle1Y + 20;
            if (paddle1Y > boardY - paddle1H) paddle1Y = boardY - paddle1H;
            paddle1.setAttribute("y", paddle1Y);
            break;
        }
      }
    </script>
  </head>
  
  <body onload="drawGameSVG()">
      <h1>
        VectorPong
      </h1>

      <svg xmlns="http://www.w3.org/2000/svg" height="300" width="600">
        <rect id="bpard" x="1" y="1" width="598" height="298" style="fill: #EFEEB3; stroke: black; stroke-width: 2;" />
        <circle id="ball" cx="300" cy="150" r="10" style="fill: white; stroke: black; stroke-width: 1;" />
        <circle cx="300" cy="150" r="1" style="fill: black;" />
        <rect id="paddle1" x="0" y="75" width="10" height="150" rx="5" ry="5" style="fill: blue; stroke: black; stroke-width: 1;" />
        <rect id="paddle2" x="590" y="75" width="10" height="150" rx="5" ry="5" style="fill: red; stroke: black; stroke-width: 1;" />
      </svg>

      <h2>
        <span style="color: blue; font-weight: bold;">
          Player 1&nbsp;&nbsp;&nbsp;&nbsp;
          <span id="p1pts">
            0
          </span>
        </span>
        &nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;
        <span style="color: red; font-weight: bold;">
          <span id="p2pts">
            0
          </span>
          &nbsp;&nbsp;&nbsp;&nbsp;Player 2
        </span>
      </h2>
      
      <div class="controls">
        <table style="width: 100%;">
          <tbody>
            <tr>
              <td>
                <strong><span style="color: blue;">Player 1 Controls:</span><br/>
                W</strong> - Shift pad up<br/>
                <strong>S</strong> - Shift pad down<br/>
              </td>
              <td>
                <strong><span style="color: red;">Player 2 Controls:</span><br/>
                Up Arrow</strong> - Shift pad up<br/>
                <strong>Down Arrow</strong> - Shift pad down<br/>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  </body>

</html>